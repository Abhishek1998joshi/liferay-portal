@component-name = "portal-user-management-and-portal-configuration"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Language Override";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		ApplicationsMenu.gotoPortlet(
			category = "Configuration",
			panel = "Control Panel",
			portlet = "Language Override");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
	}

	@description = "This test adds a new language key via the Language Override portlet and asserts that a user can search and view it in the main view page."
	@priority = "5"
	test CanAddLanguageKey {
		task ("Given that a user is in the Language Override portlet") {
			ControlMenu.viewHeaderTitle(headerTitle = "Language Override");
		}

		task ("When a user clicks on the plus button, fills out the form, and saves it") {
			LanguageOverride.addLanguageKey(
				languageKey = "text-contains-error",
				translationOverrideList = "en-US,fr-FR,pt-BR,es-ES",
				translationOverrideValueList = "Text contains error,Le texte contient une erreur,O texto contÃƒÂ©m erro,El texto contiene error");
		}

		task ("Then the language key is successfully saved and can be viewed in the View page") {
			Search.searchCP(searchTerm = "text-contains-error");

			AssertTextEquals(
				key_languageKey = "text-contains-error",
				locator1 = "LanguageOverride#VIEW_PAGE_LANGUAGE_KEY",
				value1 = "text-contains-error");

			AssertTextEquals(
				key_translation = "Text contains error",
				locator1 = "LanguageOverride#VIEW_PAGE_LANGUAGE_KEY_TRANSLATION",
				value1 = "Text contains error");
		}
	}

}