@component-name = "portal-analytics-cloud"
definition {

	property portal.release = "false";
	property portal.upstream = "true";
	property property.group = "analytics.cloud.profile";
	property testray.main.component.name = "Analytics Cloud";

	setUp {
		ACUtils.launchAC();
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}

		ACUtils.tearDownAC();
	}

	@description = "Automation ID: LRAC-9062 | Test Summary: Edit button to manage user permissions"
	@priority = "5"
	test CanEditButtonToManageUserPermissions {
        task ("Go to AC"){
            ACUtils.launchAC();
        }
        
        task ("Go to User Management in Settings"){
        ACNavigation.goToSettings();

        ACSettings.goToUserManagement();
        }

        task("Add User"){
        ACSettings.addUser(userInvite = "ac@liferay.com");

        ACSettings.goToDataSources();

        ACSettings.goToUserManagement();
        }

        task("Change permssions") {
            ACUtils.searchBar(searchItem = "ac@liferay.com");

            ACUtils.clickAnyButton(button = "Edit");

            ACSegments.goToSidebarAttributes(criterion = "Administrator");

            ACUtils.clickAnyButton(button = "Save");
        }

        task("Assert that user permissions is changed"){
            AssertElementPresent(
			    locator1 = "ACSettings#VIEW_USER_PERMISSION",
                emailAddress = "ac@liferay.com",
			    permission = "Administrator");
        }

        task("Delete Pending All Users"){
            ACSettings.deletePendingAllUsers();
        }
	}

}