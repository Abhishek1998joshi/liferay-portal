@component-name = "portal-abtesting"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Ab Testing";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		Navigator.openURL();

		// Create site and content page

		SitePages.openPagesAdmin(siteURLKey = "guest");

		ContentPages.addPage(pageName = "Ab Testing Content Page");

		PageEditor.clickPublish();

		Navigator.openWithAppendToBaseURL(urlAppend = "web/guest/ab-testing-content-page");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
	}

	@description = "Validate if the user can create an Ab Testing"
	@priority = "5"
	test CreateAbTesting {

		Click(locator1 = "AbTesting#AB_TESTING_BUTTON");

		Click(locator1 = "AbTesting#CREATE_TEST_BUTTON");

		Click(locator1 = "AbTesting#AB_TESTING_TITLE_FIELD");

		Type(
			locator1 = "AbTesting#AB_TESTING_TITLE_FIELD",
			value1 = "Create Ab Testing Title");

		Click(locator1 = "AbTesting#SAVE_AB_TESTING_BUTTON");

		Click(locator1 = "AbTesting#CREATE_VARIANT_BUTTON");

		Click(locator1 = "AbTesting#VARIANT_NAME_FIELD");

		Type(
			locator1 = "AbTesting#VARIANT_NAME_FIELD",
			value1 = "Variant Name");

		Click(locator1 = "AbTesting#SAVE_VARIANT_NAME_BUTTON");

		Click(locator1 = "AbTesting#REVIEW_AND_RUN_TEST_BUTTON");

		Click(locator1 = "AbTesting#RUN_TEST_BUTTON");

		Click(locator1 = "AbTesting#OK_BUTTON");

		Click(locator1 = "AbTesting#CONTROL_VARIANT");

		Click(locator1 = "AbTesting#VIEW_DATA_ANALYTICS_CLOUD_BUTTON");
	}

}